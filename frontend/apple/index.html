<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <title>Apple</title>
 </head>
 
 <body data-bs-theme="dark">
    <h4>Productos Apple</h4>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <div class="container">
        <p>Celulares</p>
        <div class="row row-cols-auto" id="celulares">
            <ul id="lista_celulares" class="list-inline">
            </ul>
        </div>
    </div>

    <div class="container">
        <p>Tablets</p>
        <div class="row row-cols-auto" id="tablets">
            <ul id="lista_tablets" class="list-inline">
            </ul>
        </div>
    </div>

    <div class="container">
        <p>Notebooks</p>
        <div class="row row-cols-auto" id="notebooks">
            <ul id="lista_notebooks" class="list-inline">
            </ul>
        </div>
    </div>

    <script>
        function mostrar_datos(datos) {
            console.log("Exito");
            console.log(datos);
            return datos.json();
        }

        function mostrar_error(error) {
            console.log("Error");
            console.log(error);
        }

        function parse_datos(contenido, id_lista) {
            console.log("Contenido completo:", contenido);
            const container = document.getElementById(id_lista);
            for (let indice = 0; indice < contenido.length; indice++) {
                const elemento = document.createElement("div");
                elemento.classList.add("list-inline-item"); // Agrega clase de Bootstrap para items

                const card = document.createElement("a")
                card.setAttribute("class", "card")
                card.setAttribute("href",`/producto?id=${contenido[indice].id}&modelo=${encodeURIComponent(contenido[indice].modelo)}`);
              
                const imagen = document.createElement("img")
                imagen.setAttribute("class", "card-body")
                imagen.setAttribute("src", contenido[indice].imagen)
                console.log("Imagen URL:", contenido[indice].imagen)

                const card_body = document.createElement("div")
                card_body.setAttribute("class", "card_body")

                card_body.textContent = contenido[indice].modelo;
                card.append(imagen)
                card.append(card_body)
                elemento.append(card)
                
                container.append(elemento)
            }
        }


       fetch("http://localhost:5000/Apple/celulares")
            .then(mostrar_datos)
            .then(function (contenido) {
                const id_lista = "lista_celulares";
                parse_datos(contenido, id_lista);
            })
            .catch(mostrar_error); 

        fetch("http://localhost:5000/Apple/tablets")
            .then(mostrar_datos)
            .then(function (contenido) {
                const id_lista = "lista_tablets";
                parse_datos(contenido, id_lista);
            })
            .catch(mostrar_error);

        fetch("http://localhost:5000/Apple/notebooks")
            .then(mostrar_datos)
            .then(function (contenido) {
                const id_lista = "lista_notebooks";
                parse_datos(contenido, id_lista);
            })
            .catch(mostrar_error);
    </script>

</body>